<!DOCTYPE html>
<html>
<head>  
<title>GameGTN_Play.html</title>
<link rel="stylesheet" href="CryptoStyle1.css" type="text/css" />

</head>
<body>
	<center>
<div class="pagediv">

<div class="sitetitle"> <img src="cryptohublogo2.gif"></div>


	<div class="menudiv" align="center">
		<div style="background-color:#6862d1; height:24px;" align="center">
			<a href="CryptoHome.html" style="padding-right:20px;" class="linktext">Home</a>
			<a href="Cyber.html" style="padding-right:20px;" class="linktext">CTF</a>
			<a href="Games.html" style="padding-right:20px;" class="linktext">Games</a>
		</div>
	</div>

	
				 <div id = "myDiv" class="imggamediv3" align="center">
					<img src="guessthenumber1.gif" height="205" width="637" align="center" class="imgself">
					<div class="gamecaption"> <br>I'm thinking of a four digit number with <em> distinct </em> integers (each digit in the number is unique), and you're going to guess it! <br></div>
						<div class="textdown2">Type a <b> four digit number </b> with <b> distinct </b> integers into the text bar. Every correct integer in its correct position will count as one green (1G) and every integer present in the number but in the incorrect position will count as one yellow (1Y). <br> The objective is to guess the number in 10 tries or less! Otherwise, you lose; sorry. The random number will be displayed, and you can play again. </div>

					<p id="demo1"></p>
					
					<script>
					function generateRandom(){
					var numb, a, b, c, d;
					a = Math.floor(Math.random() * 9 +1);

					b = Math.floor(Math.random() * 10); 
					while (b == a ){
					b = Math.floor(Math.random() * 10);
					}

					c = Math.floor(Math.random() * 10); 
					while (c == b || c == a ){
					c = Math.floor(Math.random() * 10);
					}

					d = Math.floor(Math.random() * 10); 
					while (d == c || d == b || d == a ){
					d = Math.floor(Math.random() * 10);
					}

					numb = parseInt("" + a + b + c + d);
					return numb;
					}

				function keypressfunc() {
					var inputnum = document.getElementById("userguess").value;
					var btn = document.getElementById("btnsubmit");
					if (inputnum.length == 4 && 
						(inputnum.substring(1,2) != inputnum.substring(0,1)) 
						&& (inputnum.substring(2,3) != inputnum.substring(0,1)) && (inputnum.substring(2,3) != inputnum.substring(1,2)) 
						&& (inputnum.substring(3,4) != inputnum.substring(0,1)) && (inputnum.substring(3,4) != inputnum.substring(1,2))
						&& (inputnum.substring(3,4) != inputnum.substring(2,3))) {
						//alert("four");
						btn.disabled = "";
						btn.className = "button1";
					}
					else {
						//alert("not four");
						btn.disabled = "disabled";
						btn.className = "button2"; 
					}

					return ((event.charCode >= 48 && event.charCode <= 57) || (event.charCode == 8))
				}

					var randNum = generateRandom() + '';
					//document.getElementById("demo1").innerHTML = randNum;

					var ctr = 0;
					</script>
				
					<input type="text" id='userguess' maxlength="4" oncopy="return false" onpaste="return false" onkeyup='return keypressfunc()'>

					<button id = "btnsubmit" class="button2" disabled onclick="checkAnswer()">SUBMIT</button>
				    
					<p id="response"></p>
					  <script>
					  	
					  	function checkAnswer() {

						ctr++;

					    var userinput, caption;
					    userinput = document.getElementById("userguess").value;
					    //if the last piece of code doesnt work for some reason
					    if (ctr > 10) {
					    	alert('You tried enough! Sorry you lost!!');
					    	var btn = document.createElement('input');
					    	btn.setAttribute('class', 'button');	
					    	btn.setAttribute('value', 'TRY AGAIN');
						    btn.setAttribute('onclick', "location.href='GameGTN_Play.html'");
						    document.getElementById("myDiv").appendChild(btn);
					    	return;
					    }
					    else if (userinput == randNum) {
					        alert("You cracked the code!");
					        caption = userinput + ": 4G, 0Y; You Guessed The Number!";
					        var btn = document.createElement('input');
    						btn.setAttribute('class', 'button'); // input element of type button
						    btn.setAttribute('value', 'PLAY AGAIN');
						    btn.setAttribute('onclick', "location.href='GameGTN_Play.html'");
						    document.getElementById("myDiv").appendChild(btn);
						    document.getElementById("btnsubmit").disabled = "disabled";
						    document.getElementById("btnsubmit").className = "button2";

					    } 
					    else {
					    	var g=0;
					    	var y=0;
					    	var i;
					    	for (i =0; i<4; i++){

					    		if (userinput.substring(i, i+1)==randNum.substring(i, i+1)) {
					    			g++;
					    		}
							//i was doing something much more unnecessary longer and stupid before
					    		else if (randNum.indexOf(userinput.substring(i, i+1)) != -1){
					    			y++;
					    		}
					    	}
					    	
					        caption = ctr + '. ' + userinput + " - " + g + "G, " + y+ "Y";
					    }


					    document.getElementById("response").innerHTML = document.getElementById("response").innerHTML + "<br>" + caption;

					    if (ctr>=10 && (userinput == randNum)){
					    	
					    	document.getElementById("demo1").innerHTML = "The number was " + randNum;
					    	document.getElementById("btnsubmit").disabled = "disabled";
						    document.getElementById("btnsubmit").className = "button2";
						    alert("Game Over!");
					    	var btn = document.createElement('input');
					    	btn.setAttribute('class', 'button');	
					    	btn.setAttribute('value', 'TRY AGAIN');
						    btn.setAttribute('onclick', "location.href='GameGTN_Play.html'");
						    document.getElementById("myDiv").appendChild(btn);

					    }
					    
					}
					</script>  

					<a href="GameGTN.html"><button class="button1">BACK TO MAIN MENU</button></a>
				</div>
			
	
</div>
</center>
</body>
</html>
